import pandas as pd
import plotly.express as px
from io import StringIO
import plotly.graph_objects as go


# Table string
table_string = """
tensor_name;sparsity;compression;0;1;2;3;4;5;6;7
00.Q;0.9490;0.987;0.100.0.090;0.136;0.171;0.172;0.136;0.091;0.100
00.K;0.9224;0.983;0.103;0.091;0.134;0.170;0.170;0.134;0.091;0.103
00.V;0.5524;0.977;0.119;0.086;0.121;0.172;0.172;0.121;0.087;0.119
00.O;0.6788;0.966;0.122;0.091;0.123;0.162;0.162;0.122;0.091;0.122
00.G;0.4750;0.982;0.113;0.087;0.122;0.175;0.175;0.123;0.088;0.113
00.U;0.4692;0.982;0.114;0.087;0.123;0.175;0.174;0.122;0.087;0.114
00.D;0.5074;0.988;0.109;0.087;0.124;0.178;0.178;0.124;0.087;0.109
10.Q;0.5291;0.975;0.120;0.087;0.121;0.169;0.171;0.121;0.087;0.120
10.K;0.5544;0.975;0.120;0.087;0.121;0.169;0.170;0.122;0.088;0.120
10.V;0.4718;0.98;0.116;0.087;0.121;0.174;0.173;0.121;0.087;0.116
10.O;0.4685;0.981;0.115;0.087;0.122;0.174;0.174;0.122;0.087;0.115
10.G;0.4720;0.982;0.114;0.087;0.122;0.174;0.175;0.122;0.087;0.114
10.U;0.4631;0.98;0.115;0.087;0.122;0.173;0.173;0.122;0.087;0.116
10.D;0.4640;0.98;0.115;0.087;0.122;0.173;0.173;0.122;0.087;0.115
00.Q;0.9904;0.982;0.096;0.097;0.138;0.167;0.167;0.138;0.097;0.096
00.K;0.9858;0.99;0.095;0.092;0.139;0.173;0.172;0.139;0.092;0.095
00.V;0.9077;0.979;0.107;0.093;0.130;0.168;0.168;0.130;0.093;0.107
00.O;0.9241;0.98;0.104;0.092;0.134;0.168;0.168;0.134;0.092;0.104
00.G;0.9245;0.972;0.110.0.096;0.129;0.164;0.164;0.129;0.096;0.110
00.U;0.9243;0.972;0.110.0.096;0.129;0.164;0.164;0.129;0.096;0.110
00.D;0.9239;0.974;0.109;0.095;0.129;0.165;0.165;0.129;0.095;0.109
10.Q;0.9212;0.975;0.108;0.095;0.130;0.166;0.165;0.130;0.095;0.108
10.K;0.9253;0.975;0.107;0.095;0.130;0.165;0.165;0.130;0.095;0.107
10.V;0.9226;0.973;0.110.0.095;0.129;0.164;0.164;0.129;0.095;0.110
10.O;0.9247;0.972;0.110.0.096;0.129;0.163;0.163;0.129;0.096;0.110
10.G;0.9224;0.972;0.109;0.096;0.129;0.164;0.164;0.129;0.096;0.109
10.U;0.9248;0.972;0.110.0.096;0.129;0.163;0.163;0.129;0.096;0.110
10.D;0.9246;0.972;0.110.0.096;0.129;0.163;0.163;0.129;0.096;0.110
00.Q;0.9946;0.977;0.098;0.099;0.137;0.163;0.163;0.138;0.099;0.099
00.K;0.9926;0.986;0.096;0.094;0.139;0.170;0.170;0.139;0.093;0.096
00.V;0.9487;0.978;0.107;0.092;0.131;0.167;0.167;0.131;0.092;0.107
00.O;0.9554;0.983;0.102;0.091;0.136;0.169;0.169;0.136;0.091;0.102
00.G;0.9560;0.97;0.110.0.096;0.130;0.161;0.161;0.130;0.096;0.110
00.U;0.9561;0.97;0.111;0.096;0.130;0.161;0.161;0.130;0.096;0.111
00.D;0.9550;0.971;0.110.0.095;0.130;0.162;0.162;0.130;0.095;0.110
10.Q;0.9589;0.973;0.108;0.095;0.131;0.163;0.163;0.131;0.095;0.108
10.K;0.9612;0.974;0.107;0.095;0.131;0.164;0.164;0.131;0.095;0.107
10.V;0.9556;0.97;0.110.0.096;0.130;0.162;0.162;0.130;0.096;0.110
10.O;0.9565;0.969;0.111;0.096;0.130;0.161;0.161;0.130;0.097;0.111
10.G;0.9558;0.97;0.110.0.096;0.130;0.161;0.161;0.130;0.096;0.110
10.U;0.9561;0.969;0.111;0.096;0.130;0.161;0.161;0.130;0.096;0.111
10.D;0.9556;0.969;0.111;0.096;0.130;0.161;0.161;0.130;0.096;0.111
00.Q;0.9963;0.974;0.100.0.100.0.137;0.161;0.162;0.137;0.100.0.100
00.K;0.9952;0.984;0.096;0.095;0.139;0.168;0.168;0.139;0.095;0.096
00.V;0.9664;0.979;0.106;0.091;0.133;0.167;0.167;0.133;0.092;0.106
00.O;0.9700.0.983;0.102;0.091;0.136;0.169;0.169;0.136;0.091;0.102
00.G;0.9683;0.971;0.110.0.095;0.131;0.162;0.162;0.131;0.096;0.110
00.U;0.9679;0.971;0.110.0.095;0.131;0.162;0.162;0.131;0.095;0.110
00.D;0.9684;0.972;0.110.0.095;0.131;0.162;0.162;0.131;0.095;0.110
10.Q;0.9717;0.974;0.107;0.094;0.133;0.164;0.164;0.133;0.094;0.107
10.K;0.9736;0.975;0.106;0.094;0.133;0.164;0.164;0.133;0.094;0.106
10.V;0.9675;0.971;0.110.0.095;0.131;0.162;0.162;0.131;0.095;0.110
10.O;0.9681;0.97;0.110.0.096;0.131;0.161;0.161;0.131;0.096;0.110
10.G;0.9683;0.971;0.109;0.096;0.131;0.162;0.162;0.131;0.096;0.109
10.U;0.9673;0.97;0.110.0.096;0.131;0.161;0.161;0.131;0.096;0.110
10.D;0.9668;0.97;0.110.0.096;0.131;0.161;0.161;0.131;0.096;0.110
00.Q;0.9971;0.973;0.101;0.100.0.136;0.160;0.161;0.137;0.100.0.101
00.K;0.9966;0.982;0.097;0.096;0.139;0.167;0.167;0.139;0.095;0.097
00.V;0.9761;0.981;0.106;0.090;0.134;0.168;0.168;0.134;0.091;0.106
00.O;0.9783;0.983;0.102;0.091;0.137;0.169;0.168;0.137;0.091;0.101
00.G;0.9769;0.973;0.108;0.094;0.133;0.163;0.163;0.133;0.094;0.108
00.U;0.9764;0.973;0.108;0.094;0.133;0.163;0.163;0.133;0.094;0.108
00.D;0.9774;0.974;0.108;0.094;0.133;0.163;0.163;0.133;0.093;0.109
10.Q;0.9790;0.976;0.106;0.094;0.134;0.164;0.164;0.134;0.094;0.106
10.K;0.9804;0.977;0.106;0.094;0.134;0.165;0.165;0.134;0.094;0.106
10.V;0.9760;0.973;0.108;0.094;0.133;0.163;0.163;0.133;0.094;0.108
10.O;0.9762;0.973;0.108;0.095;0.133;0.162;0.162;0.133;0.095;0.108
10.G;0.9767;0.973;0.108;0.095;0.133;0.162;0.162;0.133;0.095;0.108
10.U;0.9756;0.972;0.109;0.095;0.133;0.162;0.162;0.131;0.095;0.109
10.D;0.9751;0.972;0.109;0.095;0.131;0.162;0.162;0.131;0.095;0.109
00.Q;0.9977;0.972;0.101;0.100.0.136;0.160;0.160;0.136;0.100.0.101
00.K;0.9974;0.981;0.098;0.096;0.139;0.166;0.166;0.139;0.096;0.097
00.V;0.9820;0.982;0.105;0.090;0.135;0.168;0.168;0.135;0.090;0.105
00.O;0.9836;0.983;0.101;0.092;0.137;0.168;0.168;0.137;0.091;0.101
00.G;0.9835;0.975;0.107;0.093;0.134;0.164;0.163;0.134;0.093;0.107
00.U;0.9831;0.975;0.107;0.093;0.134;0.164;0.164;0.134;0.093;0.107
00.D;0.9841;0.976;0.107;0.092;0.134;0.164;0.164;0.134;0.092;0.107
10.Q;0.9840;0.977;0.106;0.093;0.135;0.165;0.165;0.135;0.093;0.106
10.K;0.9850;0.978;0.105;0.093;0.135;0.165;0.165;0.135;0.093;0.105
10.V;0.9824;0.976;0.107;0.093;0.134;0.164;0.164;0.134;0.093;0.107
10.O;0.9827;0.975;0.107;0.094;0.134;0.163;0.163;0.134;0.094;0.107
10.G;0.9830;0.975;0.107;0.094;0.134;0.163;0.163;0.134;0.093;0.107
10.U;0.9822;0.975;0.107;0.093;0.134;0.163;0.163;0.134;0.094;0.107
10.D;0.9818;0.975;0.107;0.093;0.134;0.163;0.163;0.134;0.093;0.107
00.Q;0.9980;0.972;0.102;0.100.0.136;0.160;0.160;0.136;0.101;0.102
00.K;0.9979;0.98;0.098;0.096;0.139;0.165;0.165;0.139;0.096;0.098
00.V;0.9858;0.982;0.105;0.089;0.135;0.169;0.169;0.135;0.089;0.105
00.O;0.9873;0.983;0.101;0.092;0.138;0.168;0.167;0.138;0.092;0.101
00.G;0.9884;0.977;0.106;0.092;0.136;0.164;0.164;0.136;0.092;0.106
00.U;0.9881;0.977;0.106;0.092;0.135;0.165;0.165;0.135;0.092;0.106
00.D;0.9889;0.978;0.106;0.092;0.135;0.165;0.165;0.136;0.091;0.106
10.Q;0.9876;0.978;0.105;0.092;0.135;0.165;0.165;0.136;0.092;0.105
10.K;0.9884;0.979;0.104;0.092;0.136;0.166;0.166;0.136;0.092;0.104
10.V;0.9874;0.978;0.106;0.092;0.135;0.165;0.165;0.135;0.092;0.106
10.O;0.9877;0.977;0.106;0.093;0.135;0.164;0.164;0.136;0.093;0.106
10.G;0.9877;0.977;0.106;0.093;0.136;0.164;0.164;0.135;0.093;0.106
10.U;0.9874;0.977;0.106;0.093;0.135;0.164;0.164;0.135;0.093;0.106
10.D;0.9871;0.977;0.106;0.092;0.135;0.164;0.164;0.135;0.092;0.106
00.Q;0.9983;0.971;0.102;0.100.0.136;0.159;0.159;0.136;0.101;0.102
00.K;0.9982;0.98;0.098;0.097;0.139;0.165;0.165;0.138;0.096;0.098
00.V;0.9885;0.983;0.104;0.089;0.136;0.169;0.169;0.135;0.089;0.104
00.O;0.9899;0.982;0.101;0.092;0.138;0.167;0.167;0.138;0.092;0.101
00.G;0.9919;0.979;0.105;0.092;0.136;0.165;0.165;0.136;0.092;0.105
00.U;0.9917;0.979;0.105;0.092;0.136;0.165;0.165;0.136;0.091;0.105
00.D;0.9922;0.979;0.105;0.091;0.136;0.165;0.166;0.136;0.091;0.105
10.Q;0.9904;0.979;0.104;0.092;0.136;0.166;0.166;0.136;0.092;0.104
10.K;0.9909;0.98;0.104;0.092;0.136;0.166;0.166;0.136;0.092;0.104
10.V;0.9910.0.979;0.105;0.091;0.136;0.166;0.166;0.136;0.091;0.105
10.O;0.9913;0.978;0.105;0.092;0.136;0.165;0.165;0.136;0.092;0.105
10.G;0.9911;0.978;0.105;0.092;0.136;0.165;0.165;0.136;0.092;0.105
10.U;0.9912;0.979;0.105;0.092;0.136;0.165;0.165;0.136;0.092;0.105
10.D;0.9910.0.979;0.105;0.092;0.136;0.165;0.165;0.136;0.092;0.105
00.Q;0.9985;0.971;0.102;0.100.0.136;0.159;0.159;0.136;0.101;0.102
00.K;0.9985;0.979;0.098;0.097;0.138;0.165;0.165;0.138;0.097;0.098
00.V;0.9904;0.984;0.104;0.089;0.136;0.169;0.169;0.136;0.089;0.104
00.O;0.9917;0.982;0.101;0.092;0.138;0.167;0.167;0.138;0.092;0.101
00.G;0.9943;0.98;0.104;0.091;0.137;0.166;0.166;0.137;0.091;0.104
00.U;0.9943;0.98;0.104;0.091;0.137;0.166;0.166;0.137;0.091;0.104
00.D;0.9946;0.98;0.105;0.091;0.137;0.166;0.166;0.137;0.090;0.105
10.Q;0.9925;0.98;0.104;0.091;0.137;0.166;0.166;0.137;0.091;0.104
10.K;0.9929;0.981;0.103;0.092;0.137;0.166;0.167;0.137;0.091;0.103
10.V;0.9936;0.98;0.104;0.091;0.137;0.166;0.166;0.137;0.091;0.104
10.O;0.9939;0.98;0.104;0.091;0.137;0.166;0.166;0.137;0.091;0.104
10.G;0.9935;0.98;0.104;0.092;0.137;0.166;0.166;0.137;0.091;0.104
10.U;0.9939;0.98;0.104;0.091;0.137;0.166;0.166;0.137;0.091;0.104
10.D;0.9938;0.98;0.104;0.091;0.137;0.166;0.166;0.137;0.091;0.104
00.Q;0.9985;0.971;0.103;0.101;0.136;0.159;0.159;0.136;0.101;0.103
00.K;0.9987;0.979;0.099;0.097;0.138;0.164;0.164;0.138;0.097;0.098
00.V;0.9918;0.984;0.104;0.088;0.136;0.169;0.170;0.136;0.089;0.104
00.O;0.9931;0.982;0.101;0.092;0.138;0.167;0.167;0.138;0.092;0.101
00.G;0.9960;0.981;0.104;0.091;0.137;0.166;0.166;0.137;0.091;0.104
00.U;0.9960;0.981;0.104;0.091;0.137;0.167;0.167;0.137;0.091;0.104
00.D;0.9961;0.981;0.104;0.090;0.137;0.167;0.167;0.137;0.090;0.104
10.Q;0.9942;0.981;0.103;0.091;0.137;0.167;0.167;0.137;0.091;0.103
10.K;0.9945;0.981;0.103;0.091;0.137;0.167;0.167;0.137;0.091;0.103
10.V;0.9954;0.981;0.104;0.090;0.137;0.167;0.167;0.137;0.090;0.104
10.O;0.9958;0.981;0.104;0.091;0.137;0.166;0.166;0.137;0.091;0.104
10.G;0.9952;0.98;0.104;0.091;0.137;0.166;0.166;0.137;0.091;0.104
10.U;0.9958;0.981;0.104;0.091;0.137;0.166;0.166;0.137;0.091;0.104
10.D;0.9957;0.981;0.104;0.091;0.137;0.167;0.166;0.137;0.091;0.104
00.Q;0.9987;0.97;0.103;0.101;0.136;0.159;0.159;0.136;0.101;0.103
00.K;0.9988;0.979;0.099;0.097;0.138;0.164;0.164;0.138;0.097;0.099
00.V;0.9930;0.984;0.104;0.088;0.136;0.170;0.170;0.136;0.088;0.104
00.O;0.9942;0.982;0.101;0.092;0.138;0.167;0.167;0.138;0.092;0.101
00.G;0.9972;0.981;0.103;0.091;0.137;0.167;0.167;0.137;0.091;0.103
00.U;0.9973;0.982;0.103;0.090;0.137;0.167;0.167;0.137;0.090;0.103
00.D;0.9972;0.981;0.104;0.090;0.137;0.167;0.167;0.137;0.090;0.104
10.Q;0.9955;0.982;0.103;0.091;0.137;0.167;0.167;0.137;0.091;0.103
10.K;0.9957;0.982;0.103;0.091;0.137;0.167;0.167;0.137;0.091;0.103
10.V;0.9967;0.982;0.103;0.090;0.137;0.167;0.167;0.137;0.090;0.103
10.O;0.9970;0.981;0.103;0.091;0.138;0.167;0.167;0.138;0.091;0.103
10.G;0.9965;0.981;0.103;0.091;0.137;0.167;0.166;0.137;0.091;0.103
10.U;0.9971;0.982;0.103;0.090;0.138;0.167;0.167;0.137;0.090;0.103
10.D;0.9971;0.982;0.103;0.090;0.138;0.167;0.167;0.138;0.090;0.103
00.Q;0.9988;0.97;0.103;0.101;0.136;0.159;0.159;0.136;0.101;0.103
00.K;0.9990;0.979;0.099;0.097;0.138;0.164;0.164;0.138;0.097;0.099
00.V;0.9939;0.985;0.104;0.088;0.136;0.170;0.170;0.136;0.088;0.104
00.O;0.9950;0.982;0.101;0.092;0.138;0.167;0.167;0.138;0.092;0.101
00.G;0.9980;0.982;0.103;0.090;0.138;0.167;0.167;0.138;0.090;0.103
00.U;0.9981;0.982;0.103;0.090;0.138;0.167;0.167;0.138;0.090;0.103
00.D;0.9980;0.982;0.104;0.090;0.137;0.167;0.167;0.137;0.090;0.104
10.Q;0.9964;0.982;0.103;0.091;0.137;0.167;0.167;0.137;0.091;0.103
10.K;0.9966;0.982;0.102;0.091;0.138;0.167;0.167;0.137;0.091;0.102
10.V;0.9976;0.982;0.103;0.090;0.137;0.167;0.168;0.138;0.090;0.103
10.O;0.9979;0.982;0.103;0.090;0.138;0.167;0.167;0.138;0.090;0.103
10.G;0.9974;0.981;0.103;0.091;0.138;0.167;0.167;0.137;0.091;0.103
10.U;0.9980;0.982;0.103;0.090;0.138;0.167;0.167;0.138;0.090;0.103
10.D;0.9980;0.982;0.103;0.090;0.138;0.167;0.167;0.138;0.090;0.103
00.Q;0.9989;0.97;0.103;0.101;0.136;0.159;0.159;0.136;0.101;0.103
00.K;0.9990;0.979;0.099;0.097;0.138;0.164;0.164;0.138;0.097;0.099
00.V;0.9946;0.985;0.104;0.088;0.136;0.170;0.170;0.136;0.088;0.104
00.O;0.9956;0.982;0.101;0.092;0.138;0.167;0.167;0.138;0.092;0.101
00.G;0.9985;0.982;0.103;0.090;0.138;0.167;0.167;0.138;0.090;0.103
00.U;0.9987;0.982;0.103;0.090;0.138;0.167;0.167;0.138;0.090;0.103
00.D;0.9985;0.982;0.104;0.090;0.137;0.167;0.167;0.137;0.090;0.104
10.Q;0.9972;0.982;0.102;0.091;0.138;0.167;0.167;0.138;0.090;0.102
10.K;0.9973;0.983;0.102;0.091;0.138;0.167;0.168;0.138;0.091;0.102
10.V;0.9982;0.983;0.103;0.090;0.138;0.168;0.168;0.138;0.090;0.103
10.O;0.9986;0.982;0.103;0.090;0.138;0.167;0.167;0.138;0.090;0.103
10.G;0.9980;0.982;0.103;0.091;0.138;0.167;0.167;0.138;0.090;0.103
10.U;0.9986;0.983;0.103;0.090;0.138;0.167;0.167;0.138;0.090;0.103
10.D;0.9986;0.983;0.103;0.090;0.138;0.168;0.167;0.138;0.090;0.103
00.Q;0.9990;0.97;0.103;0.101;0.135;0.159;0.159;0.136;0.101;0.103
00.K;0.9991;0.978;0.099;0.097;0.138;0.164;0.164;0.138;0.097;0.099
00.V;0.9953;0.985;0.104;0.088;0.136;0.170;0.170;0.136;0.088;0.104
00.O;0.9962;0.982;0.101;0.092;0.138;0.167;0.167;0.138;0.092;0.101
00.G;0.9989;0.982;0.103;0.090;0.138;0.167;0.167;0.138;0.090;0.103
00.U;0.9990;0.983;0.103;0.090;0.138;0.168;0.168;0.138;0.090;0.103
00.D;0.9989;0.982;0.104;0.090;0.137;0.167;0.167;0.137;0.089;0.104
10.Q;0.9978;0.983;0.102;0.090;0.138;0.168;0.168;0.138;0.090;0.102
10.K;0.9978;0.983;0.102;0.091;0.138;0.168;0.168;0.138;0.091;0.102
10.V;0.9987;0.983;0.103;0.090;0.138;0.168;0.168;0.138;0.090;0.103
10.O;0.9990;0.983;0.103;0.090;0.138;0.167;0.167;0.138;0.090;0.103
10.G;0.9985;0.982;0.103;0.090;0.138;0.167;0.167;0.138;0.090;0.103
10.U;0.9991;0.983;0.102;0.090;0.138;0.168;0.168;0.138;0.090;0.102
10.D;0.9990;0.983;0.102;0.090;0.138;0.168;0.168;0.138;0.090;0.102
"""

# Load the data from the string
data = pd.read_csv(StringIO(table_string), sep=';')
fig = go.Figure()

# Create the plot
fig.add_trace(go.Scatter(
    data,
    x='sparsity',
    y='compression',
    color='tensor_name',
    title='Variance vs Sparsity at Layer 0',
    mode='lines+markers',
    labels={'sparsity': 'Sparsity', 'compression': 'Compression'}))



if __name__ == '__main__':
    fig.show()






